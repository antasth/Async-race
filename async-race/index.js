(()=>{"use strict";var e,t,a,n,r={947:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(81),r=a.n(n),o=a(645),s=a.n(o)()(r());s.push([e.id,"/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:rgba(0,0,0,0)}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}",""]);const i=s},315:(e,t,a)=>{a.d(t,{Z:()=>w});var n=a(81),r=a.n(n),o=a(645),s=a.n(o),i=a(667),l=a.n(i),c=new URL(a(328),a.b),d=new URL(a(486),a.b),u=new URL(a(98),a.b),g=new URL(a(35),a.b),p=s()(r()),_=l()(c),h=l()(d),m=l()(u),b=l()(g);p.push([e.id,`@font-face{font-family:"Zekton Rg";src:url(${_}) format("woff2"),url(${h}) format("woff");font-weight:normal;font-style:normal;font-display:swap}*{box-sizing:border-box;margin:0;padding:0}html,body{width:100%;height:100%}body{min-height:100%;background:#303036;background:linear-gradient(to right, #24243e, #302b63, #0f0c29);color:#f0f4ef;font-family:"Zekton Rg";overflow:hidden}h1{margin:0}.button{display:flex;align-items:center;justify-content:center;padding:5px;height:20px;border:none;border-radius:5px;cursor:pointer;transition:all .2s ease-in-out;background-color:#035e7b;color:#f0f4ef}.button:hover{background-color:#02e963;color:#141e30}.button:disabled{background-color:#ddd;color:#141e30;cursor:not-allowed}.header{display:flex;align-items:center;margin-left:40px;column-gap:20px;position:sticky;z-index:20}.main{padding:0 10px;display:block}.menu{display:flex;flex-direction:column;max-width:350px}.menu__block{display:flex;justify-content:space-between;align-items:center;column-gap:.3rem;height:2rem}.menu__controls{display:flex}.menu__controls__button{width:100%}.garage{padding-top:.2rem}.garage__header,.garage__subheader{display:flex;align-items:center;column-gap:.5rem;font-size:18px}.garage__content{padding:10px 0;display:flex;flex-direction:column;row-gap:.3rem}.garage__item__header{display:flex;align-items:center;column-gap:.5rem}.garage__item__content{display:flex;align-items:center;column-gap:.2rem;border-bottom:1px dashed #ede6e3}.garage__item__content__controls{display:flex;column-gap:.2rem}.garage__item__content__track{display:flex;justify-content:space-between;width:100%}.garage__item__button{width:20px;height:20px}.garage__item__car{align-self:flex-end;width:100px;height:40px;-webkit-mask:url(${m});mask:url(${m});-webkit-mask-size:cover;mask-size:cover;box-shadow:rgba(0,0,0,.35) 0px 5px 15px}.garage__item__flag{margin-right:110px;width:50px;height:50px;background-image:url(${b});background-size:cover}.locked{overflow:hidden}.show{display:block}.hide{display:none}.modal__overlay{position:fixed;overflow:auto;left:0;top:0;right:0;bottom:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);z-index:10}.modal__overlay__modal{text-align:center;white-space:nowrap}.modal__overlay__modal::after{display:inline-block;vertical-align:middle;width:0;height:100%;content:""}.modal{display:inline-block;vertical-align:middle}.modal__container{position:relative;width:100%;height:100%;text-align:left;white-space:normal;background-color:#ede6e3;color:#141e30;box-shadow:0px 2px 35px 14px rgba(13,13,13,.04);border-radius:9px}.modal__content{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#f2f2f2}.modal__content__image{width:480px;height:270px}.modal__content__img{width:480px;min-height:270px;background-size:cover;background-repeat:no-repeat}.modal__close{position:absolute;top:.1rem;right:.1rem;width:18px;height:18px;font-size:12px;font-weight:bold;text-align:center;display:flex;align-items:center;justify-content:center;color:#141e30;background:rgba(0,0,0,0);border:1px solid #303036;border-radius:100px;transition:all .2s ease-in-out;cursor:pointer}.modal__close:hover{background:#02e963;border-color:#303036;color:#141e30}.winners{font-size:22px;padding:0 1rem;background:#303036;background:linear-gradient(to right, #24243e, #302b63, #0f0c29);position:absolute;top:0;left:0;right:0;bottom:0;display:none;z-index:0}.winners__wrapper{display:flex;flex-direction:column;justify-content:center;row-gap:.3rem;margin-top:2rem;align-items:center}.winners__car__img{margin:0 auto;width:80px;height:40px;-webkit-mask:url(${m});mask:url(${m});-webkit-mask-size:cover;mask-size:cover;box-shadow:rgba(0,0,0,.35) 0px 5px 15px}.winners__subtitle{display:flex;align-items:center;column-gap:10px}.winners__button{padding:0 15px}.winners__table{max-width:900px;margin-bottom:20px;border-collapse:collapse}.winners__table th{font-weight:bold;padding:5px;border:1px solid #ddd;cursor:pointer}.winners__table th:hover{color:#02e963}.winners__table td{width:200px;border:1px solid #ddd;text-align:center;padding:5px}@media(max-width: 767.98px){.winners{font-size:16px}.winners__table{width:95%}}`,""]);const w=p},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",n=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),n&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),n&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,n,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&s[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),a&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=a):d[2]=a),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},766:(e,t,a)=>{var n=a(91),r=a.n(n),o=new URL(a(281),a.b),s=new URL(a(750),a.b),i=new URL(a(231),a.b),l=new URL(a(366),a.b);r()(o),r()(s),r()(i),r()(l)},91:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},582:(e,t,a)=>{var n=a(379),r=a.n(n),o=a(795),s=a.n(o),i=a(569),l=a.n(i),c=a(565),d=a.n(c),u=a(216),g=a.n(u),p=a(589),_=a.n(p),h=a(947),m={};m.styleTagTransform=_(),m.setAttributes=d(),m.insert=l().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=g(),r()(h.Z,m),h.Z&&h.Z.locals&&h.Z.locals},873:(e,t,a)=>{var n=a(379),r=a.n(n),o=a(795),s=a.n(o),i=a(569),l=a.n(i),c=a(565),d=a.n(c),u=a(216),g=a.n(u),p=a(589),_=a.n(p),h=a(315),m={};m.styleTagTransform=_(),m.setAttributes=d(),m.insert=l().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=g(),r()(h.Z,m),h.Z&&h.Z.locals&&h.Z.locals},379:e=>{var t=[];function a(e){for(var a=-1,n=0;n<t.length;n++)if(t[n].identifier===e){a=n;break}return a}function n(e,n){for(var o={},s=[],i=0;i<e.length;i++){var l=e[i],c=n.base?l[0]+n.base:l[0],d=o[c]||0,u="".concat(c," ").concat(d);o[c]=d+1;var g=a(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==g)t[g].references++,t[g].updater(p);else{var _=r(p,n);n.byIndex=i,t.splice(i,0,{identifier:u,updater:_,references:1})}s.push(u)}return s}function r(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,r){var o=n(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<o.length;s++){var i=a(o[s]);t[i].references--}for(var l=n(e,r),c=0;c<o.length;c++){var d=a(o[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=l}}},569:e=>{var t={};e.exports=function(e,a){var n=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(a)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var n="";a.supports&&(n+="@supports (".concat(a.supports,") {")),a.media&&(n+="@media ".concat(a.media," {"));var r=void 0!==a.layer;r&&(n+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),n+=a.css,r&&(n+="}"),a.media&&(n+="}"),a.supports&&(n+="}");var o=a.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},763:(e,t,a)=>{a.d(t,{Bo:()=>c,Rn:()=>s,ds:()=>d,tD:()=>l,uv:()=>i});var n=a(587),r=a(806),o=a(168);const s=async(e=n.Z.garagePage,t=r.FB)=>{try{const a=await fetch(`${r.H7}?_page=${e}&_limit=${t}`),n=await a.json(),s=Number(a.headers.get("x-total-count"));(0,o.wG)(s,n)}catch(e){console.log("Сервер недоступен, попробуйте позже")}},i=async e=>{try{await fetch(r.H7,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){e instanceof Error&&console.log(e.message)}},l=async e=>{try{await fetch(`${r.H7}/${e}`,{method:"DELETE"})}catch(e){e instanceof Error&&console.log(e.message)}},c=async(e,t)=>{let a;try{const n=await fetch(`${r.H7}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});a=await n.json()}catch(e){e instanceof Error&&console.log(e.message)}return a},d=async()=>{const e=await(async()=>{const e=n.Z.winnersData.map((e=>(async e=>{let t;try{const a=await fetch(`${r.H7}/${e}`);t=await a.json()}catch(e){e instanceof Error&&console.log(e.message)}return t})(e.id)));return Promise.all(e)})();n.Z.winnerCarsList=e}},677:(e,t,a)=>{a.d(t,{BS:()=>d,H9:()=>l,IO:()=>u,P8:()=>c,ix:()=>i});var n=a(587),r=a(806),o=a(168),s=a(695);const i=async(e=n.Z.winnersPage,t=s.Lw.id,a=s.As.asc,i=r.Lw)=>{try{const n=await fetch(`${r.W0}?_page=${e}&_limit=${i}&_sort=${t}&_order=${a}`),s=await n.json(),l=Number(n.headers.get("x-total-count"));(0,o.X7)(l,s)}catch(e){e instanceof Error&&console.log("Сервер недоступен, попробуйте позже")}},l=async e=>{let t;try{const a=await fetch(`${r.W0}/${e}`);return t=await a.json(),t}catch(e){e instanceof Error&&console.log(e.message)}return t},c=async e=>{let t;try{const a=await fetch(`${r.W0}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t=await a.json()}catch(e){e instanceof Error&&console.log(e.message)}return t},d=async e=>{try{if(404===(await fetch(`${r.W0}/${e}`,{method:"DELETE"})).status)throw new Error("Winner not found")}catch(e){e instanceof Error&&console.log(e.message)}},u=async(e,t)=>{let a;try{const n=await fetch(`${r.W0}/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});a=await n.json()}catch(e){e instanceof Error&&console.log(e.message)}return a}},717:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Z:()=>c});var r=a(763),o=a(677),s=a(436),i=a(732),l=a(785);await r.Rn(),await o.ix(),await r.ds();class e{constructor(){this.garage=new i.Z,this.winners=new l.Z,this.listeners=new s.Z}start(){this.garage.drawGarageView(),this.winners.drawWinnersView(),this.listeners.addListeners()}}const c=e;n()}catch(e){n(e)}}),1)},436:(e,t,a)=>{a.d(t,{Z:()=>y});var n=a(587),r=a(168),o=a(806),s=a(695);const i=async e=>{let t;try{t=(await fetch(`${o.ao}?id=${e}&status=${s.IY.start}`,{method:"PATCH"})).json()}catch(e){e instanceof Error&&console.log(e.message)}return t},l=async e=>{const t=await fetch(`${o.ao}?id=${e}&status=${s.IY.drive}`,{method:"PATCH"}),a=await t.json();return a.id=e,a};var c=a(763);const d=(e,t)=>{try{const a=(0,r.sb)(".garage__item__content__track").clientWidth-o.XY;(0,r.sb)(`.garage__item__car[data-index="${e}"]`).animate([{transform:`translateX(${a}px)`}],{duration:t,fill:"forwards"})}catch(e){console.log("stop animation")}},u=(e,t=!1)=>{try{const a=(0,r.sb)(`.garage__item__car[data-index="${e}"]`),n=t?a.getBoundingClientRect().x-o.zP:0;a.animate([{transform:`translateX(${n}px)`}],{duration:1,fill:"forwards"})}catch(e){console.log("stop animation")}};var g=a(732),p=a(677),_=a(785);const h=class{constructor(){this.winnersView=new _.Z}async sendWinnerToServer(e){const t=await p.H9(e.id);if(t.id){const a=(0,r.XI)(t,e.time);p.IO(t.id,a)}else{const t={id:e.id,wins:1,time:(0,r.ns)(e.time)};p.P8(t)}}async getWinnersFromServer(e=n.Z.winnersPage,t=s.Lw.id,a=s.As.asc,r=o.Lw){await p.ix(e,t,a,r)}async showPrevPage(){n.Z.winnersPage>1&&(n.Z.winnersPage-=1),await p.ix(n.Z.winnersPage),await c.ds(),this.winnersView.redrawWinnersTable()}async showNextPage(){n.Z.winnersPage<n.Z.winnersPagesCount&&(n.Z.winnersPage+=1),await p.ix(n.Z.winnersPage),await c.ds(),this.winnersView.redrawWinnersTable()}redrawWinnersTable(){this.winnersView.redrawWinnersTable()}async sortWinnersByWins(e){n.Z.sortOrder="ASC"===n.Z.sortOrder?"DESC":"ASC",await p.ix(e,"wins",n.Z.sortOrder),await c.ds(),this.winnersView.redrawWinnersTable()}async sortWinnersByTime(e){n.Z.sortOrder="ASC"===n.Z.sortOrder?"DESC":"ASC",await p.ix(e,"time",n.Z.sortOrder),await c.ds(),this.winnersView.redrawWinnersTable()}async deleteWinnerFromServer(e){await p.BS(e)}},m=a.p+"assets/images/gif1.gif",b=a.p+"assets/images/gif2.gif",w=a.p+"assets/images/gif3.gif",f=a.p+"assets/images/gif4.gif",y=class{constructor(){this.garageController=new class{constructor(){this.garageView=new g.Z,this.winnersController=new h}async deleteCarFromGarage(e,t){await c.tD(e),await c.Rn(n.Z.garagePage,o.FB),await this.winnersController.deleteWinnerFromServer(e),t.remove(),this.garageView.redrawGarage(),this.clearInputs()}async startCar(e){const{distance:t,velocity:a}=await i(e);d(e,t/a);try{await l(e)}catch(t){u(e,!0)}}async startEngines(e){const t=e.map((e=>i(e)));return await Promise.all(t)}async stopCar(e){await(async e=>{let t;try{t=(await fetch(`${o.ao}?id=${e}&status=${s.IY.stop}`,{method:"PATCH"})).json()}catch(e){e instanceof Error&&console.log(e.message)}return t})(e),u(e)}async generateCars(){const e=(0,r.cj)().map((async e=>{await c.uv(e)}));await Promise.all(e),await c.Rn(n.Z.garagePage,o.FB),this.garageView.redrawGarage()}async startRace(){const e=(0,r.HO)(),t=await this.startEngines(e),a=e.map((async(e,a)=>{const n=t[a].distance/t[a].velocity;d(e,n);try{const t=await l(e);return t.time=n,t}catch{throw u(e,!0),new Error}}));let n={success:!1,id:0,time:0};try{n=await Promise.any(a),this.winnersController.sendWinnerToServer(n)}catch(e){e instanceof Error&&console.log(e.message)}return n}resetRace(){(0,r.HO)().forEach((e=>{this.stopCar(e)})),this.garageView.redrawGarage()}clearInputs(){const e=(0,r.sb)(".input__create.input__text"),t=(0,r.sb)(".input__create.input__color"),a=(0,r.sb)(".input__update.input__text"),n=(0,r.sb)(".input__update.input__color");e.value="",t.value="#ffffff",a.value="",n.value="#ffffff"}async showPrevPage(){n.Z.garagePage>1&&(n.Z.garagePage-=1),await c.Rn(n.Z.garagePage,o.FB),this.garageView.redrawGarage(),this.clearInputs()}async showNextPage(){n.Z.garagePage<n.Z.garagePagesCount&&(n.Z.garagePage+=1),await c.Rn(n.Z.garagePage,o.FB),this.garageView.redrawGarage(),this.clearInputs()}async createCar(){const e=(0,r.sb)(".input__create.input__text"),t=(0,r.sb)(".input__create.input__color");if(e.value){const a={name:e.value,color:t.value};await c.uv(a),await c.Rn(n.Z.garagePage,o.FB),this.clearInputs()}this.garageView.redrawGarage()}selectCar(e){const t=(0,r.sb)(".input__update.input__text"),a=(0,r.sb)(".input__update.input__color"),[{name:o,color:s}]=n.Z.carsData.filter((t=>t.id===e));t.value=o,a.value=s,n.Z.updateCarId=e}async updateSelectedCar(){if(n.Z.updateCarId){const e=(0,r.sb)(".input__update.input__text"),t=(0,r.sb)(".input__update.input__color"),a={name:e.value,color:t.value},o=await c.Bo(n.Z.updateCarId,a),s=n.Z.carsData.findIndex((e=>e.id===n.Z.updateCarId));n.Z.carsData.splice(s,1,o),n.Z.updateCarId=0,this.clearInputs()}this.garageView.redrawGarage()}blockAllButtons(){document.querySelectorAll(".button").forEach((e=>{e instanceof HTMLButtonElement&&!e.classList.contains("button__garage")&&!e.classList.contains("button__winners")&&(e.disabled=!0)}))}unBlockAllButtons(){document.querySelectorAll(".button").forEach((e=>{e instanceof HTMLButtonElement&&(e.classList.contains("button__stop")||(e.disabled=!1))}))}async getWinnersCarsList(){await c.ds(),this.winnersController.redrawWinnersTable()}blockSelectedButtons(e,t){document.querySelectorAll(e).forEach((e=>{e instanceof HTMLButtonElement&&(e.disabled="block"===t)}))}blockOneButton(e){const t=(0,r.sb)(e);t instanceof HTMLButtonElement&&(t.disabled=!0)}unblockOneButton(e){const t=(0,r.sb)(e);t instanceof HTMLButtonElement&&(t.disabled=!1)}},this.modalController=new class{showModal(){const e=(0,r.sb)(".modal__overlay"),t=window.innerWidth-document.documentElement.clientWidth;t&&(document.documentElement.style.marginRight=`${t}px`),e.classList.add("show"),e.classList.remove("hide"),document.body.classList.add("locked")}hideModal(){const e=(0,r.sb)(".modal__overlay");e.classList.remove("show"),e.classList.add("hide"),document.body.classList.remove("locked"),document.documentElement.style.marginRight="0"}addModalContent(e){const t=(0,r.sb)(".modal__content");t.replaceChildren();const[a]=n.Z.carsData.filter((t=>t.id===e.id)),o=(0,r.ns)(e.time),s=e.success?`Победил гонщик №${a.id} на ${a.name} время (${o})`:"К сожалению, все машины сломались",i=(0,r.az)("div",["modal__content__header"],"",t);(0,r.az)("h5",["modal__content__message"],s,i);const l=(0,r.az)("div",["modal__content__image"],"",t),c=(0,r.az)("img",["modal__content__img"],"",l);if(c instanceof HTMLImageElement){switch((0,r.xT)(3)+1){case 1:default:c.src=m;break;case 2:c.src=b;break;case 3:c.src=w}e.success||(c.src=f)}}},this.winnersController=new h}addListeners(){this.addCarBlockListeners(),this.addGenerateButtonListener(),this.addRaceButtonListener(),this.addResetButtonListener(),this.addNavButtonPrevListener(),this.addNavButtonNextListener(),this.addCreateCarButtonListener(),this.addUpdateCarButtonListener(),this.addModalCloseListeners(),this.addGarageButtonListeners()}addGarageListeners(){this.addCarBlockListeners(),this.addNavButtonPrevListener(),this.addNavButtonNextListener(),this.addModalCloseListeners()}addWinnersListeners(){this.addWinColumnSortListener(),this.addTimeColumnSortListener(),this.addPrevWinnersButtonListener(),this.addNextWinnersButtonListener()}addWinnersTableListeners(){this.addWinColumnSortListener(),this.addTimeColumnSortListener(),this.addNextWinnersButtonListener(),this.addPrevWinnersButtonListener()}addCarBlockListeners(){const e=document.querySelectorAll(".garage__item");e.length&&e.forEach((e=>{e.addEventListener("click",(async t=>{if(t.target&&t.target instanceof HTMLButtonElement&&e instanceof HTMLElement){const a=Number(e.dataset.index);t.target.classList.contains("button__remove")&&(await this.garageController.deleteCarFromGarage(a,e),this.addGarageListeners(),this.garageController.unblockOneButton(".button__race")),t.target.classList.contains("button__start")&&(this.garageController.startCar(a),this.garageController.blockOneButton(`.button__start[data-index="${a}"]`),this.garageController.blockOneButton(".button__race"),this.garageController.unblockOneButton(`.button__stop[data-index="${a}"]`)),t.target.classList.contains("button__stop")&&(this.garageController.stopCar(a),this.garageController.blockOneButton(`.button__stop[data-index="${a}"]`),this.garageController.unblockOneButton(`.button__start[data-index="${a}"]`)),t.target.classList.contains("button__select")&&this.garageController.selectCar(a)}}))}))}addCreateCarButtonListener(){(0,r.sb)(".button__create").addEventListener("click",(async()=>{await this.garageController.createCar(),this.garageController.unBlockAllButtons(),this.addGarageListeners()}))}addUpdateCarButtonListener(){(0,r.sb)(".button__update").addEventListener("click",(async()=>{await this.garageController.updateSelectedCar(),this.garageController.unBlockAllButtons(),this.addGarageListeners()}))}addGenerateButtonListener(){(0,r.sb)(".button__generate").addEventListener("click",(async()=>{await this.garageController.generateCars(),this.garageController.unblockOneButton(".button__race"),this.addGarageListeners()}))}addRaceButtonListener(){(0,r.sb)(".button__race").addEventListener("click",(async()=>{this.garageController.blockAllButtons();const e=await this.garageController.startRace();this.modalController.showModal(),this.modalController.addModalContent(e),this.garageController.unBlockAllButtons(),this.garageController.blockSelectedButtons(".button__start","block"),this.garageController.blockSelectedButtons(".button__stop","unblock"),this.garageController.blockOneButton(".button__race")}))}addResetButtonListener(){(0,r.sb)(".button__reset").addEventListener("click",(()=>{this.garageController.resetRace(),this.garageController.unBlockAllButtons(),this.addGarageListeners()}))}addNavButtonPrevListener(){(0,r.sb)(".garage__nav__button-prev").addEventListener("click",(async()=>{await this.garageController.showPrevPage(),this.garageController.unblockOneButton(".button__race"),this.addGarageListeners()}))}addNavButtonNextListener(){(0,r.sb)(".garage__nav__button-next").addEventListener("click",(async()=>{await this.garageController.showNextPage(),this.garageController.unblockOneButton(".button__race"),this.addGarageListeners()}))}addPrevWinnersButtonListener(){(0,r.sb)(".winners__button__prev").addEventListener("click",(async()=>{await this.winnersController.showPrevPage(),this.addWinnersTableListeners()}))}addNextWinnersButtonListener(){(0,r.sb)(".winners__button__next").addEventListener("click",(async()=>{await this.winnersController.showNextPage(),this.addWinnersTableListeners()}))}addGarageButtonListeners(){const e=(0,r.sb)(".button__garage"),t=(0,r.sb)(".button__winners"),a=(0,r.sb)(".winners");e.addEventListener("click",(()=>{a.style.display="none"})),t.addEventListener("click",(async()=>{a.style.display="block",a.style.zIndex="5",await this.winnersController.getWinnersFromServer(),await this.garageController.getWinnersCarsList(),this.addWinnersListeners()}))}addWinColumnSortListener(){(0,r.sb)(".table__wins").addEventListener("click",(async()=>{await this.winnersController.sortWinnersByWins(n.Z.winnersPage),this.addWinnersTableListeners()}))}addTimeColumnSortListener(){(0,r.sb)(".table__time").addEventListener("click",(async()=>{await this.winnersController.sortWinnersByTime(n.Z.winnersPage),this.addWinnersTableListeners()}))}addModalCloseListeners(){const e=(0,r.sb)(".modal__overlay");(0,r.sb)(".modal__close").addEventListener("click",(()=>{this.modalController.hideModal()})),e.addEventListener("click",(t=>{t.target===e&&this.modalController.hideModal()}))}}},732:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(587),r=a(168);const o=class{constructor(){this.menu=new class{drawHeader(){const e=(0,r.az)("header",["header"],"",null);return(0,r.az)("button",["button","header__button","button__garage"],"Garage",e),(0,r.az)("button",["button","header__button","button__winners"],"Winners",e),(0,r.az)("h2",["header__text"],"ASYNC RACE",e),e}drawMenu(){const e=(0,r.az)("section",["menu"],"",null);return e.append(this.drawInputBlock("create"),this.drawInputBlock("update")),(0,r.az)("div",["menu__controls"],"",e).append(this.drawMenuButton("race"),this.drawMenuButton("reset"),this.drawMenuButton("generate")),e}drawMenuButton(e){return(0,r.az)("button",["button",`button__${e}`,"menu__controls__button"],e.toUpperCase(),null)}drawInputBlock(e){const t=(0,r.az)("div",["menu__block"],"",null);(0,r.az)("input",[`input__${e}`,"input__text"],"",t).setAttribute("type","text");const a=(0,r.az)("input",[`input__${e}`,"input__color"],"",t);return a.setAttribute("type","color"),a.setAttribute("value","#ffffff"),(0,r.az)("button",["button",`button__${e}`,"menu__block__button"],e.toUpperCase(),t),t}},this.modal=new class{drawModal(){const e=(0,r.az)("div",["modal__overlay","modal__overlay__modal","hide"],"",null),t=(0,r.az)("div",["modal"],"",e),a=(0,r.az)("div",["modal__container"],"",t);return(0,r.az)("div",["modal__content"],"",a),(0,r.az)("button",["modal__close"],"X",a),e}}}drawGarageView(){const e=(0,r.sb)("body");e.replaceChildren();const t=(0,r.az)("main",["main"],"",null);e.append(this.menu.drawHeader(),t,this.modal.drawModal()),t.append(this.menu.drawMenu()),(0,r.az)("section",["garage"],"",t).append(this.drawGarage())}redrawGarage(){const e=(0,r.sb)(".garage");e.replaceChildren(),e.append(this.drawGarage())}drawGarage(){const e=(0,r.az)("div",["garage__wrapper"],"",null),t=(0,r.az)("div",["garage__header"],"",e);(0,r.az)("h3",["garage__header__text"],"Garage",t),(0,r.az)("span",["garage__header__count"],n.Z.carsCount,t);const a=(0,r.az)("div",["garage__subheader"],"",e);(0,r.az)("h3",["garage__page"],"Page",a),(0,r.az)("button",["button","garage__nav__button-prev"],"<",a),(0,r.az)("span",["garage__page"],n.Z.garagePage,a),(0,r.az)("button",["button","garage__nav__button-next"],">",a);const o=(0,r.az)("div",["garage__content"],"",e);return n.Z.carsData.forEach((e=>{this.drawCarBlock(o,e)})),e}drawCarBlock(e,t){const a=(0,r.az)("div",["garage__item"],"",e);a.setAttribute("data-index",String(t.id));const n=(0,r.az)("div",["garage__item__header"],"",a);(0,r.az)("button",["button","button__select","garage__header__button"],"SELECT",n),(0,r.az)("button",["button","button__remove","garage__header__button"],"REMOVE",n),(0,r.az)("p",["garage__header__carname"],t.name,n);const o=(0,r.az)("div",["garage__item__content"],"",a),s=(0,r.az)("div",["garage__item__content__controls"],"",o),i=(0,r.az)("button",["button","button__start","garage__item__button"],"A",s),l=(0,r.az)("button",["button","button__stop","garage__item__button"],"B",s);i.setAttribute("data-index",String(t.id)),l.setAttribute("data-index",String(t.id)),l.setAttribute("disabled","true");const c=(0,r.az)("div",["garage__item__content__track"],"",o),d=(0,r.az)("div",["garage__item__car"],"",c);d.setAttribute("data-index",String(t.id)),d.style.backgroundColor=t.color,(0,r.az)("div",["garage__item__flag"],"",c)}}},785:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(587),r=a(168);const o=class{drawWinnersView(){const e=(0,r.sb)("body"),t=(0,r.az)("div",["winners"],"",e);(0,r.az)("div",["winners__wrapper"],"",t).append(this.drawWinnersHeader(),this.drawWinnersTable())}redrawWinnersTable(){const e=(0,r.sb)(".winners__wrapper");e.replaceChildren(),e.append(this.drawWinnersHeader(),this.drawWinnersTable())}drawWinnersHeader(){const e=(0,r.az)("div",["winners__header"],"",null);(0,r.az)("h2",["winners__title"],`Winners(${n.Z.winnersCount})`,e);const t=(0,r.az)("div",["winners__subtitle"],"",e);return(0,r.az)("h3",["winners__page"],"Page",t),(0,r.az)("button",["button","winners__button","winners__button__prev"],"<",t),(0,r.az)("h3",["winners__subtitle"],`${n.Z.winnersPage}`,t),(0,r.az)("button",["button","winners__button","winners__button__next"],">",t),e}drawWinnersTable(){const e=(0,r.az)("table",["winners__table"],"",null),t=(0,r.az)("thead",["table__head"],"",e),a=(0,r.az)("tr",["table__row"],"",t);(0,r.az)("th",null,"№",a),(0,r.az)("th",null,"Car",a),(0,r.az)("th",null,"Car Name",a),(0,r.az)("th",["table__wins"],"Wins",a),(0,r.az)("th",["table__time"],"Best Time(s)",a);const o=(0,r.az)("tbody",null,"",e);return n.Z.winnersData.forEach(((e,t)=>{const[a]=n.Z.winnerCarsList.filter((t=>t.id===e.id)),s=(0,r.az)("tr",["table__row"],"",o);(0,r.az)("td",null,t+1,s);const i=(0,r.az)("td",null,"",s);(0,r.az)("div",["winners__car__img"],"",i).style.backgroundColor=a.color,(0,r.az)("td",null,a.name,s),(0,r.az)("td",null,e.wins,s),(0,r.az)("td",null,e.time,s)})),e}}},587:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(806);const r={carsCount:0,garagePage:n.XJ,garagePagesCount:1,updateCarId:0,carsData:[],winnersData:[],winnerCarsList:[],winnersCount:0,winnersPagesCount:1,sortOrder:"ASC",winnersPage:n.XJ}},806:(e,t,a)=>{a.d(t,{FB:()=>l,H7:()=>r,Lw:()=>c,UM:()=>_,W0:()=>o,XJ:()=>i,XY:()=>d,ao:()=>s,rh:()=>g,yL:()=>p,zP:()=>u});const n="http://127.0.0.1:3000",r=`${n}/garage`,o=`${n}/winners`,s=`${n}/engine`,i=1,l=7,c=10,d=100,u=60,g=100,p=["Tesla","Ford","Toyota","Honda","BMW","Peugeot","Citroen","Kia","Lada","Audi","Mazda","Opel","Oka","Niva","Gaz","Tavria","Moskvich","Uaz","Skoda","Volga","Slavuta","Daewoo","TagAZ","Lexus","Hyundai","Lamborghini","Porsche","Ferrari","Zaporozhets","Bugatti","Jaguar","McLaren","Chevrolet"],_=["Pilot","Razor","Supra","Camaro","Venum","GT","Aurus","Viper","Mustang","Modena","Kalina","Largus","Vesta","Corvette","Spider","Diablo","Reventon","Elise","Spitfire","Spyder","Continental","Romeo","Testarossa","Elite","Coupe","Cobra","Challenger","AMG"]},168:(e,t,a)=>{a.d(t,{HO:()=>g,X7:()=>u,XI:()=>_,az:()=>s,cj:()=>c,ns:()=>p,sb:()=>o,wG:()=>d,xT:()=>i});var n=a(587),r=a(806);const o=e=>{const t=document.querySelector(e);if(!t)throw new TypeError("Type Error");return t},s=(e,t,a,n)=>{const r=document.createElement(e);return t&&r.classList.add(...t),r.innerText=String(a),n&&n.append(r),r},i=e=>Math.floor(Math.random()*e),l=()=>{const e=i(r.yL.length),t=i(r.UM.length);return`${r.yL[e]} ${r.UM[t]}`},c=(e=r.rh)=>{const t=[];for(let a=0;a<e;a+=1)t.push({name:l(),color:`#${i(16777215).toString(16).padStart(6,"0").toUpperCase()}`});return t},d=(e,t)=>{e&&(n.Z.carsCount=e,n.Z.garagePagesCount=Math.ceil(e/r.FB)),n.Z.carsData=t},u=(e,t)=>{e&&(n.Z.winnersCount=e,n.Z.winnersPagesCount=Math.ceil(e/r.Lw)),n.Z.winnersData=t},g=()=>n.Z.carsData.map((e=>e.id)),p=e=>+(e/1e3).toFixed(2),_=(e,t)=>{const a=p(t);return{wins:e.wins+1,time:e.time<a?e.time:a}}},607:(e,t,a)=>{a.a(e,(async(e,t)=>{try{var n=a(717),r=(a(766),a(582),a(873),e([n]));(new((n=(r.then?(await r)():r)[0]).Z)).start(),t()}catch(e){t(e)}}))},695:(e,t,a)=>{var n,r,o;a.d(t,{As:()=>o,IY:()=>n,Lw:()=>r}),function(e){e.start="started",e.stop="stopped",e.drive="drive"}(n||(n={})),function(e){e.id="id",e.wins="wins",e.time="time"}(r||(r={})),function(e){e.asc="ASC",e.desc="DESC"}(o||(o={}))},281:(e,t,a)=>{e.exports=a.p+"assets/images/apple-touch-icon.png"},231:(e,t,a)=>{e.exports=a.p+"assets/images/favicon-16x16.png"},750:(e,t,a)=>{e.exports=a.p+"assets/images/favicon-32x32.png"},366:(e,t,a)=>{e.exports=a.p+"assets/images/site.webmanifest"},486:(e,t,a)=>{e.exports=a.p+"assets/images/ZektonRg-Regular.woff"},328:(e,t,a)=>{e.exports=a.p+"assets/images/ZektonRg-Regular.woff2"},98:(e,t,a)=>{e.exports=a.p+"assets/images/car.svg"},35:(e,t,a)=>{e.exports=a.p+"assets/images/flag.png"}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={id:e,exports:{}};return r[e](a,a.exports,s),a.exports}s.m=r,e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},s.a=(r,o,s)=>{var i;s&&((i=[]).d=-1);var l,c,d,u=new Set,g=r.exports,p=new Promise(((e,t)=>{d=t,c=e}));p[t]=g,p[e]=e=>(i&&e(i),u.forEach(e),p.catch((e=>{}))),r.exports=p,o((r=>{var o;l=(r=>r.map((r=>{if(null!==r&&"object"==typeof r){if(r[e])return r;if(r.then){var o=[];o.d=0,r.then((e=>{s[t]=e,n(o)}),(e=>{s[a]=e,n(o)}));var s={};return s[e]=e=>e(o),s}}var i={};return i[e]=e=>{},i[t]=r,i})))(r);var s=()=>l.map((e=>{if(e[a])throw e[a];return e[t]})),c=new Promise((t=>{(o=()=>t(s)).r=0;var a=e=>e!==i&&!u.has(e)&&(u.add(e),e&&!e.d&&(o.r++,e.push(o)));l.map((t=>t[e](a)))}));return o.r?c:s()}),(e=>(e?d(p[a]=e):c(g),n(i)))),i&&i.d<0&&(i.d=0)},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&!e;)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),s.b=document.baseURI||self.location.href,s.nc=void 0,s(607)})();